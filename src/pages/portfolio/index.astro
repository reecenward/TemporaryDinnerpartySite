---
import Layout from "../../layouts/Layout.astro";
const response = await fetch(
  "https://strapi-production-71a1.up.railway.app/api/dp-portfolios?sort[0]=createdAt:desc&populate=Thumbnail"
);
const data = await response.json();

const formatDate = (dateString: string) => {
  const options: Intl.DateTimeFormatOptions = {
    year: "numeric",
    month: "long",
    day: "numeric",
    timeZone: "UTC",
  };
  const date = new Date(dateString);
  return date.toLocaleDateString("en-US", options);
};
---

<Layout
  title="Reece's Website"
  description="."
  ogTitle="Reece's Website"
  ogDescription=""
  ogType="website"
  ogUrl="https://reecenward.com"
  ogImage={"."}
>
  <header>
    <h1>Hi</h1>
  </header>
  <main>

      <section class="wrapper">
        <ul   >
        {
          data.data.map(
            (l: {
              id: number;
              attributes: {
                Title: string;
                publishedAt: string;
                // Description: string;
              };
            }) => (
              <li>
                <a
                  class="post-wrapper"
                  href={`/portfolio/${l.attributes.Title}`}
                >
                  <img
                    src={l.attributes.Thumbnail.data.attributes.url}
                    alt={l.attributes.Thumbnail.data.attributes.alternativeText}
                  />
                  <div class="text-wrapper">
                    <h2>{l.attributes.Title}</h2>

                    <p class="date"> {formatDate(l.attributes.publishedAt)}</p>
                  </div>
                  {/* <p class="blog-des">{l.attributes.Description}</p> */}
                </a>
              </li>
            )
          )
        }
      </ul>
    </section>
  </main>
</Layout>

<style>
  @font-face {
    font-family: "goudy_bookletter_1911";
    src: url("../../public/font.woff") format("woff");
  }

  .post-wrapper {
    display: flex;
    text-decoration: none;
  }
  .post-wrapper:hover {
    text-decoration: underline;
    color: #fffbef;
  }
  img {
    width: 200px;
    height: 200px;
    border-radius: 100px;
  }
  .text-wrapper {
    color: #fffbef;
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding: 20px;
  }
  h1 {
    color: #fffbef;
    font-size: 3rem;
    font-family: "goudy_bookletter_1911";
    margin: 0;
    padding: 0;
  }
  li {
    margin-bottom: 10px;
  }
  h2 {
    margin: 0;
    padding: 0;
    font-family: "Poppins", sans-serif;
    font-weight: 900;
    font-size: 2.5rem;
  }
  ul {
    list-style-type: none;
    max-width: 70vw;
    min-width: 70vw;
  }
  .description {
    margin: 0;
    padding: 0;
    font-size: 2rem;
    font-family: "goudy_bookletter_1911";
  }
  .date {
    margin: 0;
    padding: 0;
    font-family: "goudy_bookletter_1911";
  }
  .wrapper {
    max-width: 100vw;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
</style>
